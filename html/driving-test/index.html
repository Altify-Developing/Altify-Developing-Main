<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>California DMV Written Test Practice</title>

<style>
  :root{
    --bg1:#0b1226; --bg2:#0f1b3d; --card:#141c2f; --ink:#e6e8f5;
    --muted:#b9c1e6; --accent:#316aff; --good:#4aff9e; --bad:#ff6f7d;
    --border:#2b3b66;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background: linear-gradient(145deg,var(--bg1),var(--bg2));
    color:var(--ink);
    display:flex; align-items:flex-start; justify-content:center;
  }
  .container{
    width: 960px; margin: 32px 16px; padding: 24px; border-radius: 14px;
    background: rgba(255,255,255,0.04); backdrop-filter: blur(18px);
    box-shadow: 0 0 40px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.06);
  }
  h1{margin:0 0 12px 0; font-size:26px}
  .controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  select,button{
    padding:10px 12px; border-radius:8px; border:1px solid var(--border);
    background:#1a2443; color:var(--ink); cursor:pointer; font-size:14px;
  }
  button.primary{ background: var(--accent); border-color:transparent; color:#fff; }
  button.secondary{ background:#1a2647; }
  button:hover{ filter:brightness(1.06); }
  hr{ border:0; height:1px; background:#22325d; margin:18px 0; }

  /* Hide test/results UI until Start */
  #quiz, #results { display:none; }

  /* Pills & text */
  .pillbar{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 6px}
  .pill{font-size:13px; padding:4px 8px; border-radius:18px; background:#101a33; border:1px solid #1f2c52; color:#dfe3ff}
  #sectionLabel{font-weight:600; margin-top:6px}
  #sectionProgress{opacity:.85; margin-bottom:8px}
  #qText{font-size:20px; font-weight:600; margin:10px 0 8px}

  /* Choices */
  .choice{
    display:block; width:100%; text-align:left; padding:12px; margin:7px 0;
    border-radius:8px; background:#141e36; border:1px solid #314679; color:#dde4ff; cursor:pointer;
  }
  .choice:hover{ background:#1d2b4c; }
  .choice.selected{ background:#243a7b; border-color:#4f7bff; }
  .choice.correct{ background:#163820; border-color:#45e27c; }
  .choice.incorrect{ background:#3a1721; border-color:#ff6a85; }

  /* Sign image */
  .sign-img{display:block; margin:0 auto 12px auto; width:128px; height:128px; object-fit:contain;}

  /* Nav & progress */
  .nav{display:flex; gap:8px; align-items:center; margin:8px 0 0}
  progress{width:100%; height:10px; border-radius:10px; overflow:hidden}
  progress::-webkit-progress-bar{background:#0f1330}
  progress::-webkit-progress-value{background:linear-gradient(90deg,var(--accent),#8c7bff)}

  /* Results */
  #summary{margin:8px 0 12px 0}
</style>
</head>
<body>
  <div class="container">

    <h1>California DMV Written Test Practice</h1>

    <!-- Minimal Start Screen -->
    <div id="intro" class="controls">
      <label>Category:
        <select id="categorySelect"></select>
      </label>

      <label>Section:
        <select id="sectionSelect" title="Study by segments of 40 (no repeats)">
          <option value="full" selected>Full Test (All Questions)</option>
          <option value="s1">Section 1 (Q1–40)</option>
          <option value="s2">Section 2 (Q41–80)</option>
          <option value="s3">Section 3 (Rest)</option>
        </select>
      </label>

      <button id="btnStart" class="primary">Start</button>
      <button id="btnRealStyle" class="secondary" onclick="location.href='REALSTYLE.html'">Real DMV Exam</button>
    </div>

    <hr>

    <!-- Quiz -->
    <div id="quiz">
      <div class="pillbar">
        <div class="pill" id="pillIndex">Question 1/—</div>
        <div class="pill" id="pillCat">Category: —</div>
        <div class="pill" id="pillFlag">Flag: <span id="flagStar">☆</span></div>
        <div class="pill" id="scoreNow">Score: 0</div>
        <div class="pill">Remaining: <span id="remain">—</span></div>
      </div>

      <div id="sectionLabel"></div>
      <div id="sectionProgress"></div>

      <h2 id="qText">—</h2>
      <div id="choices"></div>
      <div id="explain" class="hidden" style="opacity:.9;"></div>

      <div class="nav">
        <button id="btnPrev" class="secondary">◀ Prev (P)</button>
        <button id="btnNext" class="primary">Next ▶ (N)</button>
        <button id="btnSubmit" class="secondary">Finish</button>
        <progress id="prog" max="100" value="1"></progress>
      </div>
    </div>

    <!-- Results -->
    <div id="results">
      <h2>Results</h2>
      <p id="summary"></p>
      <div class="controls" style="margin-top:4px;">
        <button id="btnNextSection" class="secondary hidden">Continue to Next Section</button>
        <button id="btnRestartSection1" class="secondary">Restart from Section 1</button>
        <button id="btnReviewIncorrect" class="secondary">Review Incorrect</button>
        <button id="btnStartOver" class="primary">Start Over</button>
      </div>
    </div>

  </div>

  <script src="questions.js"></script>
  <script src="storage.js"></script>
  <script src="app.js"></script>
</body>
</html>
